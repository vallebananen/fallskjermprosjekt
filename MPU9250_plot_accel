#include <Wire.h>
#include <MPU6050_tockn.h>

const int MPU_addr=0x68;  // I2C address of MPU6050
const float accel_scale = 16384.0; // accelerometer scale factor
const float g = 9.81; // acceleration due to gravity in m/s^2

float Ax, Ay, Az; // variables to store real-time acceleration values

void setup(){
  Wire.begin();
  Wire.beginTransmission(MPU_addr);
  Wire.write(0x6B);        // PWR_MGMT_1 register
  Wire.write(0);           // set to zero (wakes up the MPU6050)
  Wire.endTransmission(true);
  Serial.begin(9600);
}

void loop(){
  Wire.beginTransmission(MPU_addr);
  Wire.write(0x3B);        // starting with register 0x3B (ACCEL_XOUT_H)
  Wire.endTransmission(false);
  Wire.requestFrom(MPU_addr,6,true);  // request 6 bytes (3 registers) from MPU6050
  int16_t raw_AcX=Wire.read()<<8|Wire.read();     // concatenate high and low bytes
  int16_t raw_AcY=Wire.read()<<8|Wire.read();     
  int16_t raw_AcZ=Wire.read()<<8|Wire.read();     

  // Convert raw accelerometer values to real-time acceleration values in m/s^2
  Ax = (float) raw_AcX / accel_scale * g;
  Ay = (float) raw_AcY / accel_scale * g;
  Az = (float) raw_AcZ / accel_scale * g;

  Serial.print(Ax); Serial.print(",");
  Serial.print(Ay); Serial.print(",");
  Serial.println(-Az);
  delay(5); // wait for 10ms
}

